diff --git a/.build.yml b/.build.yml
index 558aa06..f0488dc 100644
--- a/.build.yml
+++ b/.build.yml
@@ -1,15 +1,18 @@
 image: debian/stable
+packages:
+    - wget
 sources:
     - https://github.com/go-kit/kit
 tasks:
     - go_toolchain: |
-        wget -q https://dl.google.com/go/go1.12.6.linux-amd64.tar.gz
-        sudo tar -C /usr/local -xzf go1.12.6.linux-amd64.tar.gz
+        go_version="$(wget -q -O- https://golang.org/VERSION?m=text)"
+        wget -q https://dl.google.com/go/$go_version.linux-amd64.tar.gz
+        sudo tar -C /usr/local -xzf $go_version.linux-amd64.tar.gz
         sudo ln -s /usr/local/go/bin/go /usr/bin/go
         go env
     - dependencies: |
-        mkdir -p $HOME/go/src/github.com/go-kit
-        mv kit $HOME/go/src/github.com/go-kit
+        mkdir -p $(go env GOPATH)/src/github.com/go-kit
+        mv kit $(go env GOPATH)/src/github.com/go-kit
         go get -t github.com/go-kit/kit/...
     - test: |
         go test -race -v github.com/go-kit/kit/...
diff --git a/.travis.yml b/.travis.yml
index 7a26e65..4c78f9e 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -12,6 +12,5 @@ script:
   - ./coveralls.bash

 go:
-  - 1.10.x
-  - 1.11.x
+  - 1.x
   - tip
diff --git a/auth/casbin/middleware.go b/auth/casbin/middleware.go
index fdbf6dc..43f2f9d 100644
--- a/auth/casbin/middleware.go
+++ b/auth/casbin/middleware.go
@@ -48,17 +48,23 @@ func NewEnforcer(
 	subject string, object interface{}, action string,
 ) endpoint.Middleware {
 	return func(next endpoint.Endpoint) endpoint.Endpoint {
-		return func(ctx context.Context, request interface{}) (
-			response interface{}, err error,
-		) {
+		return func(ctx context.Context, request interface{}) (response interface{}, err error) {
 			casbinModel := ctx.Value(CasbinModelContextKey)
 			casbinPolicy := ctx.Value(CasbinPolicyContextKey)
+			enforcer, err := stdcasbin.NewEnforcer(casbinModel, casbinPolicy)
+			if err != nil {
+				return nil, err
+			}

-			enforcer := stdcasbin.NewEnforcer(casbinModel, casbinPolicy)
 			ctx = context.WithValue(ctx, CasbinEnforcerContextKey, enforcer)
-			if !enforcer.Enforce(subject, object, action) {
+			ok, err := enforcer.Enforce(subject, object, action)
+			if err != nil {
+				return nil, err
+			}
+			if !ok {
 				return nil, ErrUnauthorized
 			}
+
 			return next(ctx, request)
 		}
 	}
