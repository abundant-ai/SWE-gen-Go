diff --git a/examples/README.md b/examples/README.md
index 5d1c8ee..cf1812f 100644
--- a/examples/README.md
+++ b/examples/README.md
@@ -148,19 +148,19 @@ func main() {
 	ctx := context.Background()
 	svc := stringService{}
 
-	uppercaseHandler := httptransport.NewServer(
-		ctx,
-		makeUppercaseEndpoint(svc),
-		decodeUppercaseRequest,
-		encodeResponse,
-	)
-
-	countHandler := httptransport.NewServer(
-		ctx,
-		makeCountEndpoint(svc),
-		decodeCountRequest,
-		encodeResponse,
-	)
+	uppercaseHandler := httptransport.Server{
+		Context:    ctx,
+		Endpoint:   makeUppercaseEndpoint(svc),
+		DecodeRequestFunc:  decodeUppercaseRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
+
+	countHandler := httptransport.Server{
+		Context:    ctx,
+		Endpoint:   makeCountEndpoint(svc),
+		DecodeRequestFunc:  decodeCountRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
 
 	http.Handle("/uppercase", uppercaseHandler)
 	http.Handle("/count", countHandler)
@@ -254,17 +254,15 @@ var count endpoint.Endpoint
 count = makeCountEndpoint(svc)
 count = loggingMiddleware(log.NewContext(logger).With("method", "count"))(count)
 
-uppercaseHandler := httptransport.Server(
+uppercaseHandler := httptransport.Server{
+	Endpoint: uppercase,
 	// ...
-	uppercase,
-	// ...
-)
+}
 
-countHandler := httptransport.Server(
-	// ...
-	count,
+countHandler := httptransport.Server{
+	Endpoint: count,
 	// ...
-)
+}
 ```
 
 It turns out that this technique is useful for a lot more than just logging.
@@ -329,17 +327,15 @@ func main() {
 	svc := stringService{}
 	svc = loggingMiddleware{logger, svc}
 
-	uppercaseHandler := httptransport.NewServer(
+	uppercaseHandler := httptransport.Server{
+		Endpoint: makeUppercaseEndpoint(svc),
 		// ...
-		makeUppercaseEndpoint(svc),
-		// ...
-	)
+	}
 
-	countHandler := httptransport.NewServer(
+	countHandler := httptransport.Server{
+		Endpoint: makeCountEndpoint(svc),
 		// ...
-		makeCountEndpoint(svc),
-		// ...
-	)
+	}
 }
 ```
 
@@ -417,17 +413,15 @@ func main() {
 	svc = loggingMiddleware{logger, svc}
 	svc = instrumentingMiddleware{requestCount, requestLatency, countResult, svc}
 
-	uppercaseHandler := httptransport.NewServer(
+	uppercaseHandler := httptransport.Server{
+		Endpoint: makeUppercaseEndpoint(svc),
 		// ...
-		makeUppercaseEndpoint(svc),
-		// ...
-	)
+	}
 
-	countHandler := httptransport.NewServer(
+	countHandler := httptransport.Server{
+		Endpoint: makeCountEndpoint(svc),
 		// ...
-		makeCountEndpoint(svc),
-		// ...
-	)
+	}
 
 	http.Handle("/metrics", stdprometheus.Handler())
 }
@@ -513,12 +507,14 @@ func proxyingMiddleware(proxyURL string, ctx context.Context) ServiceMiddleware
 }
 
 func makeUppercaseEndpoint(ctx context.Context, proxyURL string) endpoint.Endpoint {
-	return httptransport.NewClient(
-		"GET",
-		mustParseURL(proxyURL),
-		encodeUppercaseRequest,
-		decodeUppercaseResponse,
-	).Endpoint()
+	return (httptransport.Client{
+		Client:     http.DefaultClient,
+		Method:     "GET",
+		URL:        mustParseURL(proxyURL),
+		Context:    ctx,
+		EncodeFunc: encodeUppercaseRequest,
+		DecodeFunc: decodeUppercaseResponse,
+	}).Endpoint()
 }
 ```
 
diff --git a/examples/addsvc/client/httpjson/client.go b/examples/addsvc/client/httpjson/client.go
index 3a2b2f5..aa98d07 100644
--- a/examples/addsvc/client/httpjson/client.go
+++ b/examples/addsvc/client/httpjson/client.go
@@ -29,18 +29,20 @@ func New(ctx context.Context, baseurl *url.URL, logger log.Logger, c *http.Clien
 	return client{
 		Context: ctx,
 		Logger:  logger,
-		sum: httptransport.NewClient(
-			"GET",
-			sumURL,
-			server.EncodeSumRequest,
-			server.DecodeSumResponse,
-		).Endpoint(),
-		concat: httptransport.NewClient(
-			"GET",
-			concatURL,
-			server.EncodeConcatRequest,
-			server.DecodeConcatResponse,
-		).Endpoint(),
+		sum: (httptransport.Client{
+			Client:             c,
+			Method:             "GET",
+			URL:                sumURL,
+			EncodeRequestFunc:  server.EncodeSumRequest,
+			DecodeResponseFunc: server.DecodeSumResponse,
+		}).Endpoint(),
+		concat: (httptransport.Client{
+			Client:             c,
+			Method:             "GET",
+			URL:                concatURL,
+			EncodeRequestFunc:  server.EncodeConcatRequest,
+			DecodeResponseFunc: server.DecodeConcatResponse,
+		}).Endpoint(),
 	}
 }
 
diff --git a/examples/addsvc/main.go b/examples/addsvc/main.go
index eec6f3f..37eae5a 100644
--- a/examples/addsvc/main.go
+++ b/examples/addsvc/main.go
@@ -139,25 +139,27 @@ func main() {
 
 		sum = makeSumEndpoint(svc)
 		sum = zipkin.AnnotateServer(newSumSpan, collector)(sum)
-		mux.Handle("/sum", httptransport.NewServer(
-			root,
-			sum,
-			server.DecodeSumRequest,
-			server.EncodeSumResponse,
-			httptransport.ServerBefore(traceSum),
-			httptransport.ServerErrorLogger(transportLogger),
-		))
+		mux.Handle("/sum", httptransport.Server{
+			Context:            root,
+			Endpoint:           sum,
+			DecodeRequestFunc:  server.DecodeSumRequest,
+			EncodeResponseFunc: server.EncodeSumResponse,
+			Before:             []httptransport.RequestFunc{traceSum},
+			After:              []httptransport.ResponseFunc{},
+			Logger:             transportLogger,
+		})
 
 		concat = makeConcatEndpoint(svc)
 		concat = zipkin.AnnotateServer(newConcatSpan, collector)(concat)
-		mux.Handle("/concat", httptransport.NewServer(
-			root,
-			concat,
-			server.DecodeConcatRequest,
-			server.EncodeConcatResponse,
-			httptransport.ServerBefore(traceConcat),
-			httptransport.ServerErrorLogger(transportLogger),
-		))
+		mux.Handle("/concat", httptransport.Server{
+			Context:            root,
+			Endpoint:           concat,
+			DecodeRequestFunc:  server.DecodeConcatRequest,
+			EncodeResponseFunc: server.EncodeConcatResponse,
+			Before:             []httptransport.RequestFunc{traceConcat},
+			After:              []httptransport.ResponseFunc{},
+			Logger:             transportLogger,
+		})
 
 		_ = transportLogger.Log("addr", *httpAddr)
 		errc <- http.ListenAndServe(*httpAddr, mux)
diff --git a/examples/stringsvc1/main.go b/examples/stringsvc1/main.go
index 684182b..f33125c 100644
--- a/examples/stringsvc1/main.go
+++ b/examples/stringsvc1/main.go
@@ -36,19 +36,19 @@ func main() {
 	ctx := context.Background()
 	svc := stringService{}
 
-	uppercaseHandler := httptransport.NewServer(
-		ctx,
-		makeUppercaseEndpoint(svc),
-		decodeUppercaseRequest,
-		encodeResponse,
-	)
-
-	countHandler := httptransport.NewServer(
-		ctx,
-		makeCountEndpoint(svc),
-		decodeCountRequest,
-		encodeResponse,
-	)
+	uppercaseHandler := httptransport.Server{
+		Context:            ctx,
+		Endpoint:           makeUppercaseEndpoint(svc),
+		DecodeRequestFunc:  decodeUppercaseRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
+
+	countHandler := httptransport.Server{
+		Context:            ctx,
+		Endpoint:           makeCountEndpoint(svc),
+		DecodeRequestFunc:  decodeCountRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
 
 	http.Handle("/uppercase", uppercaseHandler)
 	http.Handle("/count", countHandler)
diff --git a/examples/stringsvc2/main.go b/examples/stringsvc2/main.go
index 5e8a6d9..7539c21 100644
--- a/examples/stringsvc2/main.go
+++ b/examples/stringsvc2/main.go
@@ -43,19 +43,19 @@ func main() {
 	svc = loggingMiddleware{logger, svc}
 	svc = instrumentingMiddleware{requestCount, requestLatency, countResult, svc}
 
-	uppercaseHandler := httptransport.NewServer(
-		ctx,
-		makeUppercaseEndpoint(svc),
-		decodeUppercaseRequest,
-		encodeResponse,
-	)
+	uppercaseHandler := httptransport.Server{
+		Context:            ctx,
+		Endpoint:           makeUppercaseEndpoint(svc),
+		DecodeRequestFunc:  decodeUppercaseRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
 
-	countHandler := httptransport.NewServer(
-		ctx,
-		makeCountEndpoint(svc),
-		decodeCountRequest,
-		encodeResponse,
-	)
+	countHandler := httptransport.Server{
+		Context:            ctx,
+		Endpoint:           makeCountEndpoint(svc),
+		DecodeRequestFunc:  decodeCountRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
 
 	http.Handle("/uppercase", uppercaseHandler)
 	http.Handle("/count", countHandler)
diff --git a/examples/stringsvc3/main.go b/examples/stringsvc3/main.go
index f211696..04b7ba0 100644
--- a/examples/stringsvc3/main.go
+++ b/examples/stringsvc3/main.go
@@ -54,18 +54,18 @@ func main() {
 	svc = loggingMiddleware(logger)(svc)
 	svc = instrumentingMiddleware(requestCount, requestLatency, countResult)(svc)
 
-	uppercaseHandler := httptransport.NewServer(
-		ctx,
-		makeUppercaseEndpoint(svc),
-		decodeUppercaseRequest,
-		encodeResponse,
-	)
-	countHandler := httptransport.NewServer(
-		ctx,
-		makeCountEndpoint(svc),
-		decodeCountRequest,
-		encodeResponse,
-	)
+	uppercaseHandler := httptransport.Server{
+		Context:            ctx,
+		Endpoint:           makeUppercaseEndpoint(svc),
+		DecodeRequestFunc:  decodeUppercaseRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
+	countHandler := httptransport.Server{
+		Context:            ctx,
+		Endpoint:           makeCountEndpoint(svc),
+		DecodeRequestFunc:  decodeCountRequest,
+		EncodeResponseFunc: encodeResponse,
+	}
 
 	http.Handle("/uppercase", uppercaseHandler)
 	http.Handle("/count", countHandler)
diff --git a/examples/stringsvc3/proxying.go b/examples/stringsvc3/proxying.go
index 6427b06..6a10afd 100644
--- a/examples/stringsvc3/proxying.go
+++ b/examples/stringsvc3/proxying.go
@@ -3,6 +3,7 @@ package main
 import (
 	"errors"
 	"fmt"
+	"net/http"
 	"net/url"
 	"strings"
 	"time"
@@ -84,12 +85,13 @@ func makeUppercaseProxy(ctx context.Context, instance string) endpoint.Endpoint
 	if u.Path == "" {
 		u.Path = "/uppercase"
 	}
-	return httptransport.NewClient(
-		"GET",
-		u,
-		encodeRequest,
-		decodeUppercaseResponse,
-	).Endpoint()
+	return (httptransport.Client{
+		Client:             http.DefaultClient,
+		Method:             "GET",
+		URL:                u,
+		DecodeResponseFunc: decodeUppercaseResponse,
+		EncodeRequestFunc:  encodeRequest,
+	}).Endpoint()
 }
 
 func split(s string) []string {
diff --git a/transport/http/client.go b/transport/http/client.go
index 155d4f8..1531db9 100644
--- a/transport/http/client.go
+++ b/transport/http/client.go
@@ -12,43 +12,26 @@ import (
 
 // Client wraps a URL and provides a method that implements endpoint.Endpoint.
 type Client struct {
-	client *http.Client
-	method string
-	tgt    *url.URL
-	enc    EncodeRequestFunc
-	dec    DecodeResponseFunc
-	before []RequestFunc
-}
+	// If client is nil, http.DefaultClient will be used.
+	*http.Client
 
-// NewClient returns a
-func NewClient(method string, tgt *url.URL, enc EncodeRequestFunc, dec DecodeResponseFunc, options ...ClientOption) *Client {
-	c := &Client{
-		client: http.DefaultClient,
-		method: method,
-		tgt:    tgt,
-		enc:    enc,
-		dec:    dec,
-		before: []RequestFunc{},
-	}
-	for _, option := range options {
-		option(c)
-	}
-	return c
-}
+	// Method must be provided.
+	Method string
 
-// ClientOption sets an optional parameter for clients.
-type ClientOption func(*Client)
+	// URL must be provided.
+	URL *url.URL
 
-// SetClient sets the underlying HTTP client used for requests.
-// By default, http.DefaultClient is used.
-func SetClient(client *http.Client) ClientOption {
-	return func(c *Client) { c.client = client }
-}
+	// EncodeRequestFunc must be provided. The HTTP request passed to the
+	// EncodeRequestFunc will have a nil body.
+	EncodeRequestFunc
+
+	// DecodeResponseFunc must be provided.
+	DecodeResponseFunc
 
-// SetClientBefore sets the RequestFuncs that are applied to the outgoing HTTP
-// request before it's invoked.
-func SetClientBefore(before ...RequestFunc) ClientOption {
-	return func(c *Client) { c.before = before }
+	// Before functions are executed on the outgoing request after it is
+	// created, but before it's sent to the HTTP client. Clients have no After
+	// ResponseFuncs, as they don't work with ResponseWriters.
+	Before []RequestFunc
 }
 
 // Endpoint returns a usable endpoint that will invoke the RPC specified by
@@ -58,26 +41,31 @@ func (c Client) Endpoint() endpoint.Endpoint {
 		ctx, cancel := context.WithCancel(ctx)
 		defer cancel()
 
-		req, err := http.NewRequest(c.method, c.tgt.String(), nil)
+		req, err := http.NewRequest(c.Method, c.URL.String(), nil)
 		if err != nil {
 			return nil, fmt.Errorf("NewRequest: %v", err)
 		}
 
-		if err = c.enc(req, request); err != nil {
+		if err = c.EncodeRequestFunc(req, request); err != nil {
 			return nil, fmt.Errorf("Encode: %v", err)
 		}
 
-		for _, f := range c.before {
+		for _, f := range c.Before {
 			ctx = f(ctx, req)
 		}
 
-		resp, err := c.client.Do(req)
+		var resp *http.Response
+		if c.Client != nil {
+			resp, err = c.Client.Do(req)
+		} else {
+			resp, err = http.DefaultClient.Do(req)
+		}
 		if err != nil {
 			return nil, fmt.Errorf("Do: %v", err)
 		}
 		defer func() { _ = resp.Body.Close() }()
 
-		response, err := c.dec(resp)
+		response, err := c.DecodeResponseFunc(resp)
 		if err != nil {
 			return nil, fmt.Errorf("Decode: %v", err)
 		}
diff --git a/transport/http/client_test.go b/transport/http/client_test.go
index 5135e7d..19d2b79 100644
--- a/transport/http/client_test.go
+++ b/transport/http/client_test.go
@@ -26,13 +26,13 @@ func TestHTTPClient(t *testing.T) {
 		w.WriteHeader(http.StatusOK)
 	}))
 
-	client := httptransport.NewClient(
-		"GET",
-		mustParse(server.URL),
-		encode,
-		decode,
-		httptransport.SetClientBefore(httptransport.SetRequestHeader(headerKey, headerVal)),
-	)
+	client := httptransport.Client{
+		Method:             "GET",
+		URL:                mustParse(server.URL),
+		EncodeRequestFunc:  encode,
+		DecodeResponseFunc: decode,
+		Before:             []httptransport.RequestFunc{httptransport.SetRequestHeader(headerKey, headerVal)},
+	}
 
 	_, err := client.Endpoint()(context.Background(), struct{}{})
 	if err != nil {
diff --git a/transport/http/server.go b/transport/http/server.go
index 9bf9066..0570985 100644
--- a/transport/http/server.go
+++ b/transport/http/server.go
@@ -11,99 +11,71 @@ import (
 
 // Server wraps an endpoint and implements http.Handler.
 type Server struct {
-	ctx          context.Context
-	e            endpoint.Endpoint
-	dec          DecodeRequestFunc
-	enc          EncodeResponseFunc
-	before       []RequestFunc
-	after        []ResponseFunc
-	errorEncoder func(w http.ResponseWriter, err error)
-	logger       log.Logger
-}
+	// A background context must be provided.
+	context.Context
 
-// NewServer constructs a new server, which implements http.Server and wraps
-// the provided endpoint.
-func NewServer(
-	ctx context.Context,
-	e endpoint.Endpoint,
-	dec DecodeRequestFunc,
-	enc EncodeResponseFunc,
-	options ...ServerOption,
-) *Server {
-	s := &Server{
-		ctx:          ctx,
-		e:            e,
-		dec:          dec,
-		enc:          enc,
-		errorEncoder: defaultErrorEncoder,
-		logger:       log.NewNopLogger(),
-	}
-	for _, option := range options {
-		option(s)
-	}
-	return s
-}
+	// The endpoint that will be invoked.
+	endpoint.Endpoint
 
-// ServerOption sets an optional parameter for servers.
-type ServerOption func(*Server)
+	// DecodeRequestFunc must be provided.
+	DecodeRequestFunc
 
-// ServerBefore functions are executed on the HTTP request object before the
-// request is decoded.
-func ServerBefore(before ...RequestFunc) ServerOption {
-	return func(s *Server) { s.before = before }
-}
+	// EncodeResponseFunc must be provided.
+	EncodeResponseFunc
 
-// ServerAfter functions are executed on the HTTP response writer after the
-// endpoint is invoked, but before anything is written to the client.
-func ServerAfter(after ...ResponseFunc) ServerOption {
-	return func(s *Server) { s.after = after }
-}
+	// Before functions are executed on the HTTP request object before the
+	// request is decoded.
+	Before []RequestFunc
 
-// ServerErrorEncoder is used to encode errors to the http.ResponseWriter
-// whenever they're encountered in the processing of a request. Clients can
-// use this to provide custom error formatting and response codes. By default,
-// errors will be written as plain text with an appropriate, if generic,
-// status code.
-func ServerErrorEncoder(f func(w http.ResponseWriter, err error)) ServerOption {
-	return func(s *Server) { s.errorEncoder = f }
-}
+	// After functions are executed on the HTTP response writer after the
+	// endpoint is invoked, but before anything is written to the client.
+	After []ResponseFunc
+
+	// ErrorEncoder is used to encode errors to the http.ResponseWriter
+	// whenever they're encountered in the processing of a request. Clients
+	// can use this to provide custom error formatting and response codes. If
+	// ErrorEncoder is nil, the error will be written as plain text with
+	// an appropriate, if generic, status code.
+	ErrorEncoder func(w http.ResponseWriter, err error)
 
-// ServerErrorLogger is used to log non-terminal errors. By default, no errors
-// are logged.
-func ServerErrorLogger(logger log.Logger) ServerOption {
-	return func(s *Server) { s.logger = logger }
+	// Logger is used to log errors.
+	Logger log.Logger
 }
 
 // ServeHTTP implements http.Handler.
 func (s Server) ServeHTTP(w http.ResponseWriter, r *http.Request) {
-	ctx, cancel := context.WithCancel(s.ctx)
+	if s.ErrorEncoder == nil {
+		s.ErrorEncoder = defaultErrorEncoder
+	}
+
+	ctx, cancel := context.WithCancel(s.Context)
 	defer cancel()
 
-	for _, f := range s.before {
+	for _, f := range s.Before {
 		ctx = f(ctx, r)
 	}
 
-	request, err := s.dec(r)
+	request, err := s.DecodeRequestFunc(r)
 	if err != nil {
-		_ = s.logger.Log("err", err)
-		s.errorEncoder(w, badRequestError{err})
+		_ = s.Logger.Log("err", err)
+		s.ErrorEncoder(w, badRequestError{err})
 		return
 	}
 
-	response, err := s.e(ctx, request)
+	response, err := s.Endpoint(ctx, request)
 	if err != nil {
-		_ = s.logger.Log("err", err)
-		s.errorEncoder(w, err)
+		_ = s.Logger.Log("err", err)
+		s.ErrorEncoder(w, err)
 		return
 	}
 
-	for _, f := range s.after {
+	for _, f := range s.After {
 		f(ctx, w)
 	}
 
-	if err := s.enc(w, response); err != nil {
-		_ = s.logger.Log("err", err)
-		s.errorEncoder(w, err)
+	if err := s.EncodeResponseFunc(w, response); err != nil {
+		_ = s.Logger.Log("err", err)
+		s.ErrorEncoder(w, err)
 		return
 	}
 }
diff --git a/transport/http/server_test.go b/transport/http/server_test.go
index 0fdaa58..b7ac3a6 100644
--- a/transport/http/server_test.go
+++ b/transport/http/server_test.go
@@ -9,16 +9,18 @@ import (
 
 	"golang.org/x/net/context"
 
+	"github.com/go-kit/kit/log"
 	httptransport "github.com/go-kit/kit/transport/http"
 )
 
 func TestServerBadDecode(t *testing.T) {
-	handler := httptransport.NewServer(
-		context.Background(),
-		func(context.Context, interface{}) (interface{}, error) { return struct{}{}, nil },
-		func(*http.Request) (interface{}, error) { return struct{}{}, errors.New("dang") },
-		func(http.ResponseWriter, interface{}) error { return nil },
-	)
+	handler := httptransport.Server{
+		Context:            context.Background(),
+		Endpoint:           func(context.Context, interface{}) (interface{}, error) { return struct{}{}, nil },
+		DecodeRequestFunc:  func(*http.Request) (interface{}, error) { return struct{}{}, errors.New("dang") },
+		EncodeResponseFunc: func(http.ResponseWriter, interface{}) error { return nil },
+		Logger:             log.NewNopLogger(),
+	}
 	server := httptest.NewServer(handler)
 	defer server.Close()
 	resp, _ := http.Get(server.URL)
@@ -28,12 +30,13 @@ func TestServerBadDecode(t *testing.T) {
 }
 
 func TestServerBadEndpoint(t *testing.T) {
-	handler := httptransport.NewServer(
-		context.Background(),
-		func(context.Context, interface{}) (interface{}, error) { return struct{}{}, errors.New("dang") },
-		func(*http.Request) (interface{}, error) { return struct{}{}, nil },
-		func(http.ResponseWriter, interface{}) error { return nil },
-	)
+	handler := httptransport.Server{
+		Context:            context.Background(),
+		Endpoint:           func(context.Context, interface{}) (interface{}, error) { return struct{}{}, errors.New("dang") },
+		DecodeRequestFunc:  func(*http.Request) (interface{}, error) { return struct{}{}, nil },
+		EncodeResponseFunc: func(http.ResponseWriter, interface{}) error { return nil },
+		Logger:             log.NewNopLogger(),
+	}
 	server := httptest.NewServer(handler)
 	defer server.Close()
 	resp, _ := http.Get(server.URL)
@@ -43,12 +46,13 @@ func TestServerBadEndpoint(t *testing.T) {
 }
 
 func TestServerBadEncode(t *testing.T) {
-	handler := httptransport.NewServer(
-		context.Background(),
-		func(context.Context, interface{}) (interface{}, error) { return struct{}{}, nil },
-		func(*http.Request) (interface{}, error) { return struct{}{}, nil },
-		func(http.ResponseWriter, interface{}) error { return errors.New("dang") },
-	)
+	handler := httptransport.Server{
+		Context:            context.Background(),
+		Endpoint:           func(context.Context, interface{}) (interface{}, error) { return struct{}{}, nil },
+		DecodeRequestFunc:  func(*http.Request) (interface{}, error) { return struct{}{}, nil },
+		EncodeResponseFunc: func(http.ResponseWriter, interface{}) error { return errors.New("dang") },
+		Logger:             log.NewNopLogger(),
+	}
 	server := httptest.NewServer(handler)
 	defer server.Close()
 	resp, _ := http.Get(server.URL)
@@ -65,13 +69,14 @@ func TestServerErrorEncoder(t *testing.T) {
 		}
 		return http.StatusInternalServerError
 	}
-	handler := httptransport.NewServer(
-		context.Background(),
-		func(context.Context, interface{}) (interface{}, error) { return struct{}{}, errTeapot },
-		func(*http.Request) (interface{}, error) { return struct{}{}, nil },
-		func(http.ResponseWriter, interface{}) error { return nil },
-		httptransport.ServerErrorEncoder(func(w http.ResponseWriter, err error) { w.WriteHeader(code(err)) }),
-	)
+	handler := httptransport.Server{
+		Context:            context.Background(),
+		Endpoint:           func(context.Context, interface{}) (interface{}, error) { return struct{}{}, errTeapot },
+		DecodeRequestFunc:  func(*http.Request) (interface{}, error) { return struct{}{}, nil },
+		EncodeResponseFunc: func(http.ResponseWriter, interface{}) error { return nil },
+		ErrorEncoder:       func(w http.ResponseWriter, err error) { w.WriteHeader(code(err)) },
+		Logger:             log.NewNopLogger(),
+	}
 	server := httptest.NewServer(handler)
 	defer server.Close()
 	resp, _ := http.Get(server.URL)
@@ -97,14 +102,15 @@ func testServer(t *testing.T) (cancel, step func(), resp <-chan *http.Response)
 		stepch        = make(chan bool)
 		endpoint      = func(context.Context, interface{}) (interface{}, error) { <-stepch; return struct{}{}, nil }
 		response      = make(chan *http.Response)
-		handler       = httptransport.NewServer(
-			ctx,
-			endpoint,
-			func(*http.Request) (interface{}, error) { return struct{}{}, nil },
-			func(http.ResponseWriter, interface{}) error { return nil },
-			httptransport.ServerBefore(func(ctx context.Context, r *http.Request) context.Context { return ctx }),
-			httptransport.ServerAfter(func(ctx context.Context, w http.ResponseWriter) { return }),
-		)
+		handler       = httptransport.Server{
+			Context:            ctx,
+			Endpoint:           endpoint,
+			DecodeRequestFunc:  func(*http.Request) (interface{}, error) { return struct{}{}, nil },
+			EncodeResponseFunc: func(http.ResponseWriter, interface{}) error { return nil },
+			Before:             []httptransport.RequestFunc{func(ctx context.Context, r *http.Request) context.Context { return ctx }},
+			After:              []httptransport.ResponseFunc{func(ctx context.Context, w http.ResponseWriter) { return }},
+			Logger:             log.NewNopLogger(),
+		}
 	)
 	go func() {
 		server := httptest.NewServer(handler)
